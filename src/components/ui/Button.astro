---
import { twMerge } from "tailwind-merge";
import { clsx, type ClassValue } from "clsx";

function cn(...inputs: ClassValue[]) {
    return twMerge(clsx(inputs));
}

interface Props extends astroHTML.JSX.ButtonHTMLAttributes {
    variant?: "primary" | "secondary" | "outline" | "ghost";
    size?: "sm" | "md" | "lg";
    fullWidth?: boolean;
    href?: string;
    target?: string; // Add target prop
    className?: string; // Explicitly add className to Props
}

const {
    variant = "primary",
    size = "md",
    fullWidth = false,
    href,
    class: className,
    ...props
} = Astro.props;

const baseStyles =
    "inline-flex items-center justify-center rounded-md font-bold transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 cursor-pointer text-center no-underline";

const variants = {
    primary: "bg-[var(--color-primary)] text-white hover:bg-opacity-90",
    secondary:
        "bg-[var(--color-secondary)] text-[var(--color-primary)] hover:bg-opacity-80",
    outline:
        "border border-[var(--color-primary)] text-[var(--color-primary)] hover:bg-[var(--color-primary)] hover:text-white",
    ghost: "hover:bg-accent hover:text-accent-foreground text-[var(--color-primary)]",
};

const sizes = {
    sm: "h-9 px-4 text-sm",
    md: "h-11 px-8 text-base",
    lg: "h-14 px-10 text-lg",
};

const classes = cn(
    baseStyles,
    variants[variant],
    sizes[size],
    fullWidth && "w-full",
    className,
);
---

{
    href ? (
        <a href={href} class={classes} {...props}>
            <slot />
        </a>
    ) : (
        <button class={classes} {...props}>
            <slot />
        </button>
    )
}
